"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6825],{6677:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>l,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var s=n(91636),a=n(74848),r=n(28453);const o={date:"2024-06-23 11:10",slug:"\u4f7f\u7528React\u524d\u7aef\u6765\u663e\u793aWordPress\u7ad9\u70b9\u6587\u7ae0"},c=void 0,i={authorsImageUrls:[]},d=[{value:"\u5728WordPress\u7ad9\u70b9\u7f16\u8f91\u9875\u9762\u65f6\uff0c\u53f3\u4fa7\u6a21\u677f\u9009\u62e9\u201cReact Categories List\u201d",id:"\u5728wordpress\u7ad9\u70b9\u7f16\u8f91\u9875\u9762\u65f6\u53f3\u4fa7\u6a21\u677f\u9009\u62e9react-categories-list",level:3}];function p(e){const t={code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:'\u8fd9\u4e2a\u6587\u4ef6\u662f\u4e00\u4e2a\u7528\u4e8e WordPress \u7684\u81ea\u5b9a\u4e49\u9875\u9762\u6a21\u677f\uff0c\u540d\u4e3a "React Categories List"\u3002\u5176\u4e3b\u8981\u76ee\u7684\u662f\u901a\u8fc7 WordPress \u540e\u7aef\u83b7\u53d6\u6240\u6709\u5206\u7c7b\u53ca\u5176\u6587\u7ae0\u6570\u636e\uff0c\u5e76\u5728\u524d\u7aef\u4f7f\u7528 React \u663e\u793a\u8fd9\u4e9b\u6570\u636e\u3002'}),"\n",(0,a.jsx)(t.p,{children:"\u5728\u5b50\u4e3b\u9898astra-child\u76ee\u5f55\u4e0b\u521b\u5efacustom-page.php"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",children:'<?php\n/*\nTemplate Name: React Categories List\n*/\n\n//\u8fd9\u4e2a\u662f\u81ea\u5b9a\u4e49\u9875\u9762\u6a21\u677f\uff0c\u5728\u53d1\u5e03\u9875\u9762\u65f6\uff0c\u53ef\u4ee5\u9009\u62e9\u6b64\u6a21\u677f \nget_header(); // \u5f15\u5165\u9875\u7709\n\n// \u83b7\u53d6\u6240\u6709\u5206\u7c7b\n$categories = get_categories(array(\n    \'hide_empty\' => false,\n));\n\n// \u83b7\u53d6\u6bcf\u4e2a\u5206\u7c7b\u7684\u6587\u7ae0\n$categories_with_posts = array();\nforeach ($categories as $category) {\n    $posts = get_posts(array(\n        \'category\' => $category->term_id,\n        \'numberposts\' => -1,\n    ));\n    $categories_with_posts[] = array(\n        \'category\' => $category,\n        \'posts\' => $posts,\n    );\n}\n\n// \u5c06\u6570\u636e\u8f6c\u6362\u4e3a JSON \u683c\u5f0f\n$categories_with_posts_json = json_encode($categories_with_posts);\n?>\n\n<div id="app"></div>\n\n<?php\nget_footer(); // \u5f15\u5165\u9875\u811a\n?>\n\n\x3c!-- \u5f15\u5165 React \u548c ReactDOM --\x3e\n<script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"><\/script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"><\/script>\n\n\x3c!-- \u5f15\u5165 Babel \u7f16\u8bd1\u5668 --\x3e\n<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"><\/script>\n\n\x3c!-- \u5c06 PHP \u6570\u636e\u4f20\u9012\u7ed9 JavaScript --\x3e\n<script type="text/javascript">\n  const categoriesWithPosts = <?php echo $categories_with_posts_json; ?>;\n<\/script>\n\n\x3c!-- \u5f15\u5165\u6211\u4eec\u7684 React \u7ec4\u4ef6 --\x3e\n<script type="text/babel">\n  const { useState, useEffect } = React;\n\n  const CategoryList = ({ categories }) => {\n    const [searchTerm, setSearchTerm] = useState(\'\');\n    const filteredCategories = categories.filter(categoryData => \n      categoryData.category.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      categoryData.posts.some(post => post.post_title.toLowerCase().includes(searchTerm.toLowerCase()))\n    );\n\n    return (\n      <div className="categories">\n        <input \n          type="text"\n          placeholder="Search categories or posts..."\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className="search-input"\n        />\n        {filteredCategories.map((categoryData, index) => (\n          <Category key={index} categoryData={categoryData} />\n        ))}\n        {filteredCategories.length === 0 && <p>No categories or posts found.</p>}\n      </div>\n    );\n  };\n\n  const Category = ({ categoryData }) => {\n    const { category, posts } = categoryData;\n    const [isExpanded, setIsExpanded] = useState(true);\n\n    return (\n      <div className="category">\n        <h2 onClick={() => setIsExpanded(!isExpanded)}>{category.name}</h2>\n        {isExpanded && (\n          posts.length > 0 ? (\n            <ul>\n              {posts.map(post => (\n                <li key={post.ID}>\n                  <a href={post.guid} dangerouslySetInnerHTML={{ __html: post.post_title }}></a>\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <p>No posts available</p>\n          )\n        )}\n      </div>\n    );\n  };\n\n  const App = () => {\n    const [categories, setCategories] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n      setCategories(categoriesWithPosts);\n      setLoading(false);\n    }, []);\n\n    if (loading) {\n      return <p>Loading...</p>;\n    }\n\n    return (\n      <div>\n        <h1>All Categories and Posts</h1>\n        <CategoryList categories={categories} />\n      </div>\n    );\n  };\n\n  ReactDOM.render(<App />, document.getElementById(\'app\'));\n<\/script>\n\n\x3c!-- \u6dfb\u52a0\u4e00\u4e9b\u57fa\u672c\u7684\u6837\u5f0f --\x3e\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    line-height: 1.6;\n  }\n\n  #app {\n    padding: 20px;\n    max-width: 800px;\n    margin: 0 auto;\n  }\n\n  .search-input {\n    width: 100%;\n    padding: 10px;\n    margin-bottom: 20px;\n    font-size: 16px;\n  }\n\n  .categories {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n  }\n\n  .category {\n    border: 1px solid #ddd;\n    padding: 20px;\n    border-radius: 8px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n  }\n\n  .category h2 {\n    font-size: 1.5em;\n    margin-bottom: 10px;\n    cursor: pointer;\n  }\n\n  .category ul {\n    list-style: none;\n    padding: 0;\n  }\n\n  .category li {\n    margin-bottom: 10px;\n  }\n\n  .category a {\n    text-decoration: none;\n    color: #0073aa;\n  }\n\n  .category a:hover {\n    text-decoration: underline;\n  }\n</style>\n'})}),"\n",(0,a.jsx)(t.h3,{id:"\u5728wordpress\u7ad9\u70b9\u7f16\u8f91\u9875\u9762\u65f6\u53f3\u4fa7\u6a21\u677f\u9009\u62e9react-categories-list",children:"\u5728WordPress\u7ad9\u70b9\u7f16\u8f91\u9875\u9762\u65f6\uff0c\u53f3\u4fa7\u6a21\u677f\u9009\u62e9\u201cReact Categories List\u201d"}),"\n",(0,a.jsx)(t.p,{children:"\u8fd9\u4e2a\u6a21\u677f\u5b9e\u9645\u4e0a\u662f\u4e3a\u4e00\u4e2a\u7279\u5b9a\u9875\u9762\u8bbe\u8ba1\u7684\uff0c\u901a\u8fc7\u7ed3\u5408 WordPress \u540e\u7aef\u7684\u6570\u636e\u83b7\u53d6\u529f\u80fd\u548c React \u524d\u7aef\u7684\u52a8\u6001\u6e32\u67d3\u80fd\u529b\uff0c\u5b9e\u73b0\u4e86\u4e00\u4e2a\u4ea4\u4e92\u6027\u5f3a\u3001\u7528\u6237\u4f53\u9a8c\u826f\u597d\u7684\u5206\u7c7b\u548c\u6587\u7ae0\u5c55\u793a\u9875\u9762\u3002"})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>c});var s=n(96540);const a={},r=s.createContext(a);function o(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(r.Provider,{value:t},e.children)}},91636:e=>{e.exports=JSON.parse('{"permalink":"/blog/\u4f7f\u7528React\u524d\u7aef\u6765\u663e\u793aWordPress\u7ad9\u70b9\u6587\u7ae0","editUrl":"https://github.com/frankelinli/frankelinli.github.io/edit/main/blog/2024/06-23-\u4f7f\u7528React\u524d\u7aef\u6765\u663e\u793aWordPress\u7ad9\u70b9\u6587\u7ae0.md","source":"@site/blog/2024/06-23-\u4f7f\u7528React\u524d\u7aef\u6765\u663e\u793aWordPress\u7ad9\u70b9\u6587\u7ae0.md","title":"\u4f7f\u7528React\u524d\u7aef\u6765\u663e\u793aWordPress\u7ad9\u70b9\u6587\u7ae0","description":"\u8fd9\u4e2a\u6587\u4ef6\u662f\u4e00\u4e2a\u7528\u4e8e WordPress \u7684\u81ea\u5b9a\u4e49\u9875\u9762\u6a21\u677f\uff0c\u540d\u4e3a \\"React Categories List\\"\u3002\u5176\u4e3b\u8981\u76ee\u7684\u662f\u901a\u8fc7 WordPress \u540e\u7aef\u83b7\u53d6\u6240\u6709\u5206\u7c7b\u53ca\u5176\u6587\u7ae0\u6570\u636e\uff0c\u5e76\u5728\u524d\u7aef\u4f7f\u7528 React \u663e\u793a\u8fd9\u4e9b\u6570\u636e\u3002","date":"2024-06-23T11:10:00.000Z","tags":[],"readingTime":2.51,"hasTruncateMarker":true,"authors":[],"frontMatter":{"date":"2024-06-23 11:10","slug":"\u4f7f\u7528React\u524d\u7aef\u6765\u663e\u793aWordPress\u7ad9\u70b9\u6587\u7ae0"},"unlisted":false,"lastUpdatedAt":1719120591000,"prevItem":{"title":"adafdfadsf","permalink":"/blog/\u4f7f\u7528React\u524d\u7aef\u6765\u663e\u793aWordPress\u7ad9\u70b9\u6587\u7ae0\u6cd5\u7b2c\u4e09\u65b9\u7684"},"nextItem":{"title":"docusaurus\u9875\u9762\u8c03\u7528WordPress\u6587\u7ae0","permalink":"/blog/docusaurus\u9875\u9762\u8c03\u7528WordPress\u6587\u7ae0"}}')}}]);