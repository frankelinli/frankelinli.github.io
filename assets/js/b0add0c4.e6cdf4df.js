"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5003],{83330:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var i=t(8446),o=t(74848),s=t(28453);const r={date:"2024-11-21 23:40",slug:"docsidebar\u5b8c\u5584\u5e26\u4e66\u7b7e"},c=void 0,a={authorsImageUrls:[]},l=[{value:"docsidebar.php:",id:"docsidebarphp",level:3},{value:"style.css",id:"stylecss",level:3},{value:"\u52a0\u8f7d Font Awesome \u56fe\u6807\u5e93",id:"\u52a0\u8f7d-font-awesome-\u56fe\u6807\u5e93",level:3},{value:"docsidebar.js",id:"docsidebarjs",level:3},{value:"functions.php",id:"functionsphp",level:3}];function d(n){const e={code:"code",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\u65e0\u8bba\u5f53\u524d\u6587\u7ae0\u5c5e\u4e8e\u4e3b\u5206\u7c7b\u8fd8\u662f\u5b50\u5206\u7c7b\uff0c\u4fa7\u8fb9\u680f\u90fd\u663e\u793a\u4e3b\u5206\u7c7b\u7684\u6587\u7ae0\u5217\u8868\uff0c\u5e76\u6298\u53e0\u663e\u793a\u4e3b\u5206\u7c7b\u4e0b\u5b50\u5206\u7c7b\u7684\u6587\u7ae0\u5217\u8868"}),"\u3002"]}),"\n",(0,o.jsxs)(e.p,{children:["\u4f7f\u4fa7\u8fb9\u680f\u5728\u5f53\u524d\u6587\u7ae0\u5c5e\u4e8e\u5b50\u5206\u7c7b\u65f6\uff0c",(0,o.jsx)(e.strong,{children:"\u81ea\u52a8\u5c55\u5f00\u5bf9\u5e94\u7684\u5b50\u5206\u7c7b\u7684\u6587\u7ae0\u5217\u8868"}),"\uff0c\u65e0\u9700\u7528\u6237\u624b\u52a8\u70b9\u51fb\u5c55\u5f00\u3002"]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:"https://docu-1319658309.cos.ap-guangzhou.myqcloud.com/image-20241121235111027.png",alt:"image-20241121235111027"})}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"\u81ea\u52a8\u5c55\u5f00\u5f53\u524d\u5b50\u5206\u7c7b"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u5982\u679c\u5f53\u524d\u6587\u7ae0\u5c5e\u4e8e\u67d0\u4e2a\u5b50\u5206\u7c7b\uff0c\u5219\u5bf9\u5e94\u7684\u5b50\u5206\u7c7b\u6587\u7ae0\u5217\u8868\u9ed8\u8ba4\u5c55\u5f00\u3002"}),"\n",(0,o.jsx)(e.li,{children:"\u5176\u4ed6\u5b50\u5206\u7c7b\u4ecd\u7136\u4fdd\u6301\u6298\u53e0\u72b6\u6001\u3002"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"\u5f53\u524d\u5b50\u5206\u7c7b\u9ad8\u4eae\u663e\u793a"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u5728\u4fa7\u8fb9\u680f\u4e2d\u9ad8\u4eae\u5f53\u524d\u5b50\u5206\u7c7b\u7684\u6807\u9898\uff0c\u63d0\u5347\u7528\u6237\u4f53\u9a8c\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\u9ad8\u4eae\u5f53\u524d\u6587\u7ae0"}),"\uff1a"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u5728\u4e3b\u5206\u7c7b\u6587\u7ae0\u5217\u8868\u4e2d\uff0c\u9ad8\u4eae\u5f53\u524d\u6587\u7ae0\u3002"}),"\n",(0,o.jsx)(e.li,{children:"\u5728\u5b50\u5206\u7c7b\u6587\u7ae0\u5217\u8868\u4e2d\uff0c\u540c\u6837\u9ad8\u4eae\u5f53\u524d\u6587\u7ae0\u3002"}),"\n"]}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\u6837\u5f0f\u4f18\u5316"}),"\uff1a"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u6dfb\u52a0\u660e\u663e\u7684\u89c6\u89c9\u533a\u5206\uff0c\u4f7f\u5f53\u524d\u6587\u7ae0\u5728\u6587\u7ae0\u5217\u8868\u4e2d\u66f4\u52a0\u7a81\u51fa\u3002"}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:"https://docu-1319658309.cos.ap-guangzhou.myqcloud.com/image-20241121235222652.png",alt:"image-20241121235222652"})}),"\n",(0,o.jsx)(e.h3,{id:"docsidebarphp",children:"docsidebar.php:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-php",children:"<?php\n// \u83b7\u53d6\u5f53\u524d\u6587\u7ae0\u7684\u5206\u7c7b\n$categories = get_the_category();\n\nif (!empty($categories)) {\n    // \u83b7\u53d6\u5f53\u524d\u6587\u7ae0\u7684\u7b2c\u4e00\u4e2a\u5206\u7c7b\n    $current_category = $categories[0];\n\n    // \u83b7\u53d6\u5f53\u524d\u6587\u7ae0\u7684 ID\n    $current_post_id = get_the_ID();\n\n    // \u83b7\u53d6\u4e3b\u5206\u7c7b\uff08\u6700\u9876\u5c42\u5206\u7c7b\uff09\n    $main_category = $current_category;\n    while ($main_category->parent != 0) {\n        $main_category = get_category($main_category->parent);\n    }\n\n    // \u83b7\u53d6\u4e3b\u5206\u7c7b\u7684\u6587\u7ae0\uff08\u4e0d\u6392\u9664\u5f53\u524d\u6587\u7ae0\uff09\n    $main_category_args = array(\n        'category__in' => array($main_category->term_id), // \u4e3b\u5206\u7c7b\n        'post__not_in' => array(),                       // \u5305\u62ec\u5f53\u524d\u6587\u7ae0\n        'posts_per_page' => -1,                          // \u83b7\u53d6\u6240\u6709\u6587\u7ae0\n    );\n    $main_query = new WP_Query($main_category_args);\n\n    // \u83b7\u53d6\u4e3b\u5206\u7c7b\u7684\u5b50\u5206\u7c7b\n    $child_categories = get_categories(array(\n        'parent' => $main_category->term_id, // \u4e3b\u5206\u7c7b\u7684\u5b50\u5206\u7c7b\n        'hide_empty' => false,               // \u5305\u62ec\u7a7a\u5b50\u5206\u7c7b\n    ));\n\n    echo '<div class=\"category-sidebar\">';\n\n    // \u663e\u793a\u4e3b\u5206\u7c7b\u6807\u9898\n    echo '<h3>' . esc_html($main_category->name) . '</h3>';\n\n    // \u663e\u793a\u4e3b\u5206\u7c7b\u7684\u6587\u7ae0\u5217\u8868\n    if ($main_query->have_posts()) {\n        echo '<ul class=\"category-post-list\">';\n        while ($main_query->have_posts()) {\n            $main_query->the_post();\n            $post_id = get_the_ID();\n\n            // \u5224\u65ad\u662f\u5426\u4e3a\u5f53\u524d\u6587\u7ae0\n            $is_current_post = ($post_id == $current_post_id);\n\n            echo '<li>';\n            echo '<a href=\"' . get_the_permalink() . '\"';\n            if ($is_current_post) {\n                echo ' style=\"font-weight: bold; color: #0073aa;\"'; // \u9ad8\u4eae\u5f53\u524d\u6587\u7ae0\n            }\n            echo '>';\n            // \u6dfb\u52a0 Font Awesome \u56fe\u6807\n            echo '<i class=\"fa ' . ($is_current_post ? 'fa-bookmark' : 'fa-file-alt') . '\" aria-hidden=\"true\"></i> '; // \u5f53\u524d\u6587\u7ae0\u663e\u793a\u4e66\u7b7e\u56fe\u6807\uff0c\u5176\u4ed6\u6587\u7ae0\u663e\u793a\u6587\u4ef6\u56fe\u6807\n            echo get_the_title();\n            echo '</a>';\n            echo '</li>';\n        }\n        echo '</ul>';\n    } else {\n        echo '<p>\u4e3b\u5206\u7c7b\u6682\u65e0\u6587\u7ae0\u3002</p>';\n    }\n\n    // \u663e\u793a\u5b50\u5206\u7c7b\u53ca\u5176\u6587\u7ae0\n    if (!empty($child_categories)) {\n        foreach ($child_categories as $child_category) {\n            // \u68c0\u67e5\u5f53\u524d\u6587\u7ae0\u662f\u5426\u5c5e\u4e8e\u8fd9\u4e2a\u5b50\u5206\u7c7b\n            $is_current_child = ($current_category->term_id == $child_category->term_id);\n\n            // \u83b7\u53d6\u5b50\u5206\u7c7b\u7684\u6587\u7ae0\n            $child_args = array(\n                'category__in' => array($child_category->term_id), // \u5b50\u5206\u7c7b\n                'posts_per_page' => -1,                           // \u83b7\u53d6\u6240\u6709\u6587\u7ae0\n            );\n            $child_query = new WP_Query($child_args);\n\n            echo '<div class=\"child-category\">';\n\n            // \u5b50\u5206\u7c7b\u6807\u9898\n            echo '<h4 class=\"child-category-title\" data-child-category=\"' . $child_category->term_id . '\"';\n            if ($is_current_child) {\n                echo ' style=\"font-weight: bold; color: #0073aa;\"'; // \u9ad8\u4eae\u5f53\u524d\u5b50\u5206\u7c7b\n            }\n            echo '>';\n            echo esc_html($child_category->name) . ($is_current_child ? ' \u25b2' : ' \u25bc'); // \u5f53\u524d\u5b50\u5206\u7c7b\u5c55\u5f00\uff0c\u5176\u4ed6\u5b50\u5206\u7c7b\u6298\u53e0\n            echo '</h4>';\n\n            // \u5b50\u5206\u7c7b\u6587\u7ae0\u5217\u8868\n            echo '<ul class=\"child-category-post-list\" id=\"child-category-' . $child_category->term_id . '\"';\n            if (!$is_current_child) {\n                echo ' style=\"display: none;\"'; // \u9ed8\u8ba4\u9690\u85cf\u975e\u5f53\u524d\u5b50\u5206\u7c7b\u7684\u6587\u7ae0\u5217\u8868\n            }\n            echo '>';\n            if ($child_query->have_posts()) {\n                while ($child_query->have_posts()) {\n                    $child_query->the_post();\n                    $post_id = get_the_ID();\n\n                    // \u5224\u65ad\u662f\u5426\u4e3a\u5f53\u524d\u6587\u7ae0\n                    $is_current_post = ($post_id == $current_post_id);\n\n                    echo '<li>';\n                    echo '<a href=\"' . get_the_permalink() . '\"';\n                    if ($is_current_post) {\n                        echo ' style=\"font-weight: bold; color: #0073aa;\"'; // \u9ad8\u4eae\u5f53\u524d\u6587\u7ae0\n                    }\n                    echo '>';\n                    // \u6dfb\u52a0 Font Awesome \u56fe\u6807\n                    echo '<i class=\"fa ' . ($is_current_post ? 'fa-bookmark' : 'fa-file-alt') . '\" aria-hidden=\"true\"></i> '; // \u5f53\u524d\u6587\u7ae0\u663e\u793a\u4e66\u7b7e\u56fe\u6807\uff0c\u5176\u4ed6\u6587\u7ae0\u663e\u793a\u6587\u4ef6\u56fe\u6807\n                    echo get_the_title();\n                    echo '</a>';\n                    echo '</li>';\n                }\n            } else {\n                echo '<p>\u6b64\u5b50\u5206\u7c7b\u6682\u65e0\u6587\u7ae0\u3002</p>';\n            }\n            echo '</ul>';\n\n            echo '</div>';\n        }\n    }\n\n    echo '</div>'; // \u4e3b\u5206\u7c7b\u5bb9\u5668\u7ed3\u675f\n    wp_reset_postdata();\n} else {\n    echo '<p>\u5f53\u524d\u6587\u7ae0\u6ca1\u6709\u5206\u7c7b\u3002</p>';\n}\n?>\n"})}),"\n",(0,o.jsx)(e.h3,{id:"stylecss",children:"style.css"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-css",children:'/* \u4e3b\u5206\u7c7b\u5bb9\u5668 */\n.category-sidebar {\n    margin-bottom: 20px;\n    padding: 15px;\n    background-color: #f9f9f9;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n}\n\n/* \u5f53\u524d\u5206\u7c7b\u6807\u9898 */\n.category-sidebar h3 {\n    font-size: 18px;\n    margin-bottom: 10px;\n    color: #333;\n}\n\n/* \u5f53\u524d\u5206\u7c7b\u6587\u7ae0\u5217\u8868 */\n.category-post-list {\n    list-style: none; /* \u53bb\u6389\u5706\u70b9 */\n    margin: 0;\n    padding: 0;\n}\n\n.category-post-list li {\n    margin: 8px 0; /* \u8c03\u6574\u95f4\u8ddd */\n}\n\n.category-post-list li a {\n    text-decoration: none;\n    color: #555;\n    display: flex; /* \u8ba9\u56fe\u6807\u548c\u6587\u5b57\u5bf9\u9f50 */\n    align-items: center;\n}\n\n.category-post-list li a i {\n    margin-right: 8px; /* \u56fe\u6807\u4e0e\u6587\u5b57\u7684\u95f4\u8ddd */\n    color: #aaa;\n}\n\n.category-post-list li a:hover i {\n    color: #0073aa; /* \u9f20\u6807\u60ac\u505c\u65f6\u56fe\u6807\u989c\u8272 */\n}\n\n/* \u9ad8\u4eae\u5f53\u524d\u6587\u7ae0 */\n.category-post-list li a[style*="font-weight: bold"],\n.child-category-post-list li a[style*="font-weight: bold"] {\n    font-weight: bold;\n    color: #0073aa;\n    background-color: #eef6fc; /* \u6dfb\u52a0\u80cc\u666f\u8272 */\n    padding: 3px 5px;\n    border-radius: 3px;\n}\n\n.category-post-list li a[style*="font-weight: bold"] i {\n    color: #0073aa; /* \u9ad8\u4eae\u56fe\u6807\u989c\u8272 */\n}\n\n/* \u5b50\u5206\u7c7b\u6807\u9898 */\n.child-category-title {\n    font-size: 16px;\n    font-weight: bold;\n    cursor: pointer;\n    color: #0073aa;\n    margin-top: 15px;\n}\n\n.child-category-title:hover {\n    text-decoration: underline;\n}\n\n/* \u5f53\u524d\u5b50\u5206\u7c7b\u9ad8\u4eae */\n.child-category-title[style*="font-weight: bold"] {\n    color: #333;\n}\n\n/* \u5b50\u5206\u7c7b\u6587\u7ae0\u5217\u8868 */\n.child-category-post-list {\n    list-style: none; /* \u53bb\u6389\u5706\u70b9 */\n    margin: 10px 0 0 15px;\n    padding: 0;\n}\n\n.child-category-post-list li {\n    margin: 8px 0;\n}\n\n.child-category-post-list li a {\n    text-decoration: none;\n    color: #555;\n    display: flex;\n    align-items: center;\n}\n\n.child-category-post-list li a i {\n    margin-right: 8px;\n    color: #aaa;\n}\n\n.child-category-post-list li a:hover i {\n    color: #0073aa;\n}\n\n.child-category-post-list li a[style*="font-weight: bold"] i {\n    color: #0073aa;\n}\t\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u52a0\u8f7d-font-awesome-\u56fe\u6807\u5e93",children:"\u52a0\u8f7d Font Awesome \u56fe\u6807\u5e93"}),"\n",(0,o.jsxs)(e.p,{children:["\u786e\u4fdd WordPress \u52a0\u8f7d\u4e86 Font Awesome \u56fe\u6807\u5e93\u3002\u5982\u679c\u5c1a\u672a\u52a0\u8f7d\uff0c\u53ef\u4ee5\u5728 ",(0,o.jsx)(e.code,{children:"functions.php"})," \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\uff1a"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-php",children:"function enqueue_fontawesome() {\n    wp_enqueue_style('font-awesome', 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css');\n}\nadd_action('wp_enqueue_scripts', 'enqueue_fontawesome');\n"})}),"\n",(0,o.jsx)(e.h3,{id:"docsidebarjs",children:"docsidebar.js"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"jQuery(document).ready(function ($) {\n    // \u70b9\u51fb\u5b50\u5206\u7c7b\u6807\u9898\u5c55\u5f00/\u6298\u53e0\u5b50\u5206\u7c7b\u6587\u7ae0\u5217\u8868\n    $('.child-category-title').on('click', function () {\n        var childCategoryId = $(this).data('child-category');\n        var childCategoryList = $('#child-category-' + childCategoryId);\n\n        if (childCategoryList.is(':visible')) {\n            childCategoryList.slideUp(); // \u6298\u53e0\n            $(this).text($(this).text().replace('\u25b2', '\u25bc')); // \u66f4\u65b0\u7bad\u5934\n        } else {\n            childCategoryList.slideDown(); // \u5c55\u5f00\n            $(this).text($(this).text().replace('\u25bc', '\u25b2')); // \u66f4\u65b0\u7bad\u5934\n        }\n    });\n});\n"})}),"\n",(0,o.jsx)(e.h3,{id:"functionsphp",children:"functions.php"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-php",children:"// \u5728\u5185\u5bb9\u9876\u90e8\u52a0\u8f7d\u81ea\u5b9a\u4e49\u4fa7\u8fb9\u680f\nadd_action('astra_content_top', 'load_doc_sidebar');\nfunction load_doc_sidebar() {\n    if (is_single()) { // \u4ec5\u5728\u5355\u7bc7\u6587\u7ae0\u9875\u9762\u52a0\u8f7d\n        // \u52a0\u8f7d docsidebar.php \u6587\u4ef6\n        get_template_part('docsidebar');\n    }\n}\n\n\n\nfunction enqueue_docsidebar_scripts() {\n    wp_enqueue_script(\n        'docsidebar-js',\n        get_stylesheet_directory_uri() . '/js/docsidebar.js', // \u4f7f\u7528\u5b50\u4e3b\u9898\u76ee\u5f55\n        array('jquery'), // \u4f9d\u8d56 jQuery\n        null,\n        true // \u5728\u9875\u9762\u5e95\u90e8\u52a0\u8f7d\n    );\n}\nadd_action('wp_enqueue_scripts', 'enqueue_docsidebar_scripts');\n"})})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>c});var i=t(96540);const o={},s=i.createContext(o);function r(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),i.createElement(s.Provider,{value:e},n.children)}},8446:n=>{n.exports=JSON.parse('{"permalink":"/blog/docsidebar\u5b8c\u5584\u5e26\u4e66\u7b7e","editUrl":"https://github.com/frankelinli/frankelinli.github.io/edit/main/blog/2024/11-21-docsidebar\u5b8c\u5584\u5e26\u4e66\u7b7e.md","source":"@site/blog/2024/11-21-docsidebar\u5b8c\u5584\u5e26\u4e66\u7b7e.md","title":"docsidebar\u5b8c\u5584\u5e26\u4e66\u7b7e","description":"\u65e0\u8bba\u5f53\u524d\u6587\u7ae0\u5c5e\u4e8e\u4e3b\u5206\u7c7b\u8fd8\u662f\u5b50\u5206\u7c7b\uff0c\u4fa7\u8fb9\u680f\u90fd\u663e\u793a\u4e3b\u5206\u7c7b\u7684\u6587\u7ae0\u5217\u8868\uff0c\u5e76\u6298\u53e0\u663e\u793a\u4e3b\u5206\u7c7b\u4e0b\u5b50\u5206\u7c7b\u7684\u6587\u7ae0\u5217\u8868\u3002","date":"2024-11-21T23:40:00.000Z","tags":[],"readingTime":6.745,"hasTruncateMarker":true,"authors":[],"frontMatter":{"date":"2024-11-21 23:40","slug":"docsidebar\u5b8c\u5584\u5e26\u4e66\u7b7e"},"unlisted":false,"lastUpdatedAt":1732255826000,"nextItem":{"title":"docsidebar\u663e\u793a\u548c\u9690\u85cf\u90e8\u5206\u6587\u7ae0\u5217\u8868","permalink":"/blog/docsidebar\u663e\u793a\u548c\u9690\u85cf\u90e8\u5206\u6587\u7ae0\u5217\u8868"}}')}}]);