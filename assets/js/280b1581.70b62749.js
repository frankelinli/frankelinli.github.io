"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[456],{98795:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var n=r(96540),i=r(44586),s=r(74848);function l(){const{siteConfig:e}=(0,i.A)(),t=e?.baseUrl||"/",[r,l]=(0,n.useState)([]),[d,m]=(0,n.useState)(!0),[h,u]=(0,n.useState)(null),[f,S]=(0,n.useState)("");return(0,n.useEffect)((()=>{let e=!1;return async function(){try{m(!0);try{const r=a(t,"blog/feed.json"),n=await fetch(r,{cache:"no-store"});if(!n.ok)throw new Error("HTTP "+n.status);const i=await n.json();if(!e){const e=Array.isArray(i.items)?i.items:[],t=e.map((e=>({id:e.id||e.url||e.guid||e.title,title:e.title||"(\u65e0\u6807\u9898)",permalink:e.url||"#",date:e.date_published||e.date_modified||"",description:e.summary||e.content_text||o(e.content_html)||""}))).sort(((e,t)=>new Date(t.date)-new Date(e.date)));return l(t),void S("JSON Feed")}}catch(r){console.warn("[blog-list] JSON Feed \u83b7\u53d6\u5931\u8d25\uff0c\u5c1d\u8bd5 RSS...",r)}try{const n=["blog/rss.xml","blog/feed.xml","blog/index.xml"];let i=null,s=null;for(const e of n){const r=a(t,e),n=await fetch(r,{cache:"no-store"});if(n.ok){i=await n.text(),s=r;break}}if(i){const t=function(e){try{const t=(new DOMParser).parseFromString(e,"application/xml");return Array.from(t.querySelectorAll("item")).map((e=>({id:c(e,"guid")||c(e,"link")||c(e,"title"),title:c(e,"title")||"(\u65e0\u6807\u9898)",permalink:c(e,"link")||"#",date:c(e,"pubDate")||c(e,"dc:date")||"",description:(c(e,"description")||"").trim()})))}catch(r){return console.warn("RSS parse error",r),[]}}(i);if(!e&&t.length)return l(t.sort(((e,t)=>new Date(t.date)-new Date(e.date)))),void S("RSS")}}catch(r){console.warn("[blog-list] RSS \u83b7\u53d6\u5931\u8d25\uff0c\u5c1d\u8bd5 fallback...",r)}try{const r=a(t,"data/blogPosts.json"),n=await fetch(r,{cache:"no-store"});if(n.ok){const t=await n.json();if(!e&&Array.isArray(t)){const e=[...t].sort(((e,t)=>new Date(t.date)-new Date(e.date)));return l(e),void S("Fallback JSON")}}}catch(r){console.warn("[blog-list] fallback JSON \u5931\u8d25",r)}if(!e)throw new Error("\u65e0\u6cd5\u83b7\u53d6\u4efb\u4f55\u6570\u636e\u6e90 (JSON Feed / RSS / Fallback)")}catch(r){e||u(r.message||String(r))}finally{e||m(!1)}}(),()=>{e=!0}}),[]),(0,s.jsxs)("main",{style:{padding:"2rem 1rem",maxWidth:820,margin:"0 auto"},children:[(0,s.jsx)("h1",{style:{marginBottom:"0.5rem"},children:"\u535a\u5ba2\u6587\u7ae0\u5217\u8868"}),f&&(0,s.jsxs)("div",{style:{fontSize:"0.7rem",color:"#888",marginBottom:"1rem"},children:["\u6570\u636e\u6765\u6e90\uff1a",f]}),d&&(0,s.jsx)("p",{children:"\u52a0\u8f7d\u4e2d..."}),h&&(0,s.jsxs)("p",{style:{color:"red"},children:["\u52a0\u8f7d\u5931\u8d25\uff1a",h]}),!d&&!h&&0===r.length&&(0,s.jsx)("p",{children:"\u6682\u65e0\u6587\u7ae0\u3002"}),!d&&!h&&r.length>0&&(0,s.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:r.map((e=>(0,s.jsxs)("li",{style:{marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid #eee"},children:[(0,s.jsx)("a",{href:e.permalink,style:{fontSize:"1.05rem",fontWeight:600},children:e.title}),(0,s.jsx)("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.25rem"},children:new Date(e.date).toLocaleDateString()}),e.description&&(0,s.jsx)("p",{style:{margin:"0.5rem 0 0",fontSize:"0.85rem",color:"#444"},children:e.description})]},e.id)))}),(0,s.jsxs)("section",{style:{marginTop:"2rem"},children:[(0,s.jsx)("h2",{style:{fontSize:"1.1rem"},children:"\u8bf4\u660e"}),(0,s.jsxs)("ul",{style:{fontSize:"0.8rem",lineHeight:1.5},children:[(0,s.jsx)("li",{children:"\u591a\u7ea7\u83b7\u53d6\u987a\u5e8f\uff1aJSON Feed \u2192 RSS \u2192 Fallback JSON"}),(0,s.jsx)("li",{children:"\u6784\u5efa\u4ea7\u7269\u4e2d\u624d\u4f1a\u51fa\u73b0 feed.json\uff08\u6e90\u4ee3\u7801\u76ee\u5f55\u4e0d\u751f\u6210\uff09"}),(0,s.jsxs)("li",{children:["\u53ef\u5728 ",(0,s.jsx)("code",{children:"docusaurus.config.js"})," \u4e2d\u8c03\u6574 ",(0,s.jsx)("code",{children:"feedOptions"})," \u5f71\u54cd feed \u5185\u5bb9"]}),(0,s.jsxs)("li",{children:["\u82e5\u9700\u9650\u5236\u6761\u6570\uff1a\u5728 ",(0,s.jsx)("code",{children:"setPosts"})," \u524d\u4f7f\u7528 ",(0,s.jsx)("code",{children:"slice(0, N)"})]}),(0,s.jsx)("li",{children:"\u53ef\u62d3\u5c55\uff1a\u589e\u52a0\u672c\u5730\u7f13\u5b58\u3001\u641c\u7d22\u6216\u5206\u9875"})]})]})]})}function o(e){return e?e.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim():""}function a(e,t){return e.endsWith("/")||(e+="/"),e+t.replace(/^\//,"")}function c(e,t){const r=e.querySelector(t);return r?r.textContent:""}}}]);