"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5428],{38699:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>l,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var s=t(81816),a=t(74848),o=t(28453);const r={date:"2024-06-24 19:21",slug:"wordpress\u4f7f\u7528React\u5217\u51fa\u7ad9\u70b9\u5168\u90e8\u5e16\u5b50"},c=void 0,i={authorsImageUrls:[]},p=[];function d(e){const n={code:"code",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"\u5728\u4e3b\u9898\u4e0b\u521b\u5efa\u4e00\u4e2aphp\u9875\u9762\u6a21\u677f\u6587\u4ef6\uff0c\u6bd4\u5982customlist.php\u3002\u7136\u540e\u53d1\u5e03\u65b0\u9875\u9762\u65f6\uff0c\u4f7f\u7528\u8fd9\u4e2a\u6a21\u677f\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:'<?php\n/*\nTemplate Name: React Categories List\n*/\n\n//\u8fd9\u4e2a\u662f\u81ea\u5b9a\u4e49\u9875\u9762\u6a21\u677f\uff0c\u5728\u53d1\u5e03\u9875\u9762\u65f6\uff0c\u53ef\u4ee5\u9009\u62e9\u6b64\u6a21\u677f \nget_header(); // \u5f15\u5165\u9875\u7709\n\n// \u83b7\u53d6\u6240\u6709\u5206\u7c7b\n$categories = get_categories(array(\n    \'hide_empty\' => false,\n));\n\n// \u83b7\u53d6\u6bcf\u4e2a\u5206\u7c7b\u7684\u6587\u7ae0\n$categories_with_posts = array();\nforeach ($categories as $category) {\n    $posts = get_posts(array(\n        \'category\' => $category->term_id,\n        \'numberposts\' => -1,\n    ));\n    $categories_with_posts[] = array(\n        \'category\' => $category,\n        \'posts\' => $posts,\n    );\n}\n\n// \u5c06\u6570\u636e\u8f6c\u6362\u4e3a JSON \u683c\u5f0f\n$categories_with_posts_json = json_encode($categories_with_posts);\n?>\n\n<div id="app"></div>\n\n<?php\nget_footer(); // \u5f15\u5165\u9875\u811a\n?>\n\n\x3c!-- \u5f15\u5165 React \u548c ReactDOM --\x3e\n<script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"><\/script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"><\/script>\n\n\x3c!-- \u5f15\u5165 Babel \u7f16\u8bd1\u5668 --\x3e\n<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"><\/script>\n\n\x3c!-- \u5c06 PHP \u6570\u636e\u4f20\u9012\u7ed9 JavaScript --\x3e\n<script type="text/javascript">\n  const categoriesWithPosts = <?php echo $categories_with_posts_json; ?>;\n<\/script>\n\n\x3c!-- \u5f15\u5165\u6211\u4eec\u7684 React \u7ec4\u4ef6 --\x3e\n<script type="text/babel">\n  const { useState, useEffect } = React;\n\n  const CategoryList = ({ categories }) => {\n    const [searchTerm, setSearchTerm] = useState(\'\');\n    const filteredCategories = categories.filter(categoryData => \n      categoryData.category.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      categoryData.posts.some(post => post.post_title.toLowerCase().includes(searchTerm.toLowerCase()))\n    );\n\n    return (\n      <div className="categories">\n        <input \n          type="text"\n          placeholder="Search categories or posts..."\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className="search-input"\n        />\n        {filteredCategories.map((categoryData, index) => (\n          <Category key={index} categoryData={categoryData} />\n        ))}\n        {filteredCategories.length === 0 && <p>No categories or posts found.</p>}\n      </div>\n    );\n  };\n\n  const Category = ({ categoryData }) => {\n    const { category, posts } = categoryData;\n    const [isExpanded, setIsExpanded] = useState(true);\n\n    return (\n      <div className="category">\n        <h2 onClick={() => setIsExpanded(!isExpanded)}>{category.name}</h2>\n        {isExpanded && (\n          posts.length > 0 ? (\n            <ul>\n              {posts.map(post => (\n                <li key={post.ID}>\n                  <a href={post.guid} dangerouslySetInnerHTML={{ __html: post.post_title }}></a>\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <p>No posts available</p>\n          )\n        )}\n      </div>\n    );\n  };\n\n  const App = () => {\n    const [categories, setCategories] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n      setCategories(categoriesWithPosts);\n      setLoading(false);\n    }, []);\n\n    if (loading) {\n      return <p>Loading...</p>;\n    }\n\n    return (\n      <div>\n        <h1>All Categories and Posts</h1>\n        <CategoryList categories={categories} />\n      </div>\n    );\n  };\n\n  ReactDOM.render(<App />, document.getElementById(\'app\'));\n<\/script>\n\n\x3c!-- \u6dfb\u52a0\u4e00\u4e9b\u57fa\u672c\u7684\u6837\u5f0f --\x3e\n<style>\n  body {\n    font-family: Arial, sans-serif;\n    line-height: 1.6;\n  }\n\n  #app {\n    padding: 20px;\n    max-width: 800px;\n    margin: 0 auto;\n  }\n\n  .search-input {\n    width: 100%;\n    padding: 10px;\n    margin-bottom: 20px;\n    font-size: 16px;\n  }\n\n  .categories {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n  }\n\n  .category {\n    border: 1px solid #ddd;\n    padding: 20px;\n    border-radius: 8px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n  }\n\n  .category h2 {\n    font-size: 1.5em;\n    margin-bottom: 10px;\n    cursor: pointer;\n  }\n\n  .category ul {\n    list-style: none;\n    padding: 0;\n  }\n\n  .category li {\n    margin-bottom: 10px;\n  }\n\n  .category a {\n    text-decoration: none;\n    color: #0073aa;\n  }\n\n  .category a:hover {\n    text-decoration: underline;\n  }\n</style>\n'})})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var s=t(96540);const a={},o=s.createContext(a);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(o.Provider,{value:n},e.children)}},81816:e=>{e.exports=JSON.parse('{"permalink":"/docs/blog/wordpress\u4f7f\u7528React\u5217\u51fa\u7ad9\u70b9\u5168\u90e8\u5e16\u5b50","editUrl":"https://github.com/frankelinli/frankelinli.github.io/edit/main/blog/2024/06-24-wordpress\u4f7f\u7528React\u5217\u51fa\u7ad9\u70b9\u5168\u90e8\u5e16\u5b50.md","source":"@site/blog/2024/06-24-wordpress\u4f7f\u7528React\u5217\u51fa\u7ad9\u70b9\u5168\u90e8\u5e16\u5b50.md","title":"wordpress\u4f7f\u7528React\u5217\u51fa\u7ad9\u70b9\u5168\u90e8\u5e16\u5b50","description":"\u5728\u4e3b\u9898\u4e0b\u521b\u5efa\u4e00\u4e2aphp\u9875\u9762\u6a21\u677f\u6587\u4ef6\uff0c\u6bd4\u5982customlist.php\u3002\u7136\u540e\u53d1\u5e03\u65b0\u9875\u9762\u65f6\uff0c\u4f7f\u7528\u8fd9\u4e2a\u6a21\u677f\u3002","date":"2024-06-24T19:21:00.000Z","tags":[],"readingTime":2.41,"hasTruncateMarker":true,"authors":[],"frontMatter":{"date":"2024-06-24 19:21","slug":"wordpress\u4f7f\u7528React\u5217\u51fa\u7ad9\u70b9\u5168\u90e8\u5e16\u5b50"},"unlisted":false,"lastUpdatedAt":1719299259000,"prevItem":{"title":"\u817e\u8baf\u4e91\u670d\u52a1\u5668\u81ea\u52a8\u4efb\u52a1\u5e76\u53d1\u90ae\u4ef6\u7ed9\u81ea\u5df1","permalink":"/docs/blog/\u817e\u8baf\u4e91\u670d\u52a1\u5668\u81ea\u52a8\u4efb\u52a1\u5e76\u53d1\u90ae\u4ef6\u7ed9\u81ea\u5df1"},"nextItem":{"title":"WordPress\u6839\u636e\u6587\u7ae0\u5206\u7c7b\u7c7b\u52a8\u6001\u663e\u793a\u4fa7\u8fb9\u680f\u6587\u7ae0\u5217\u8868","permalink":"/docs/blog/WordPress\u6839\u636e\u6587\u7ae0\u5206\u7c7b\u7c7b\u52a8\u6001\u663e\u793a\u4fa7\u8fb9\u680f\u6587\u7ae0\u5217\u8868"}}')}}]);