"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1153],{6433:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>p,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var i=t(4848),r=t(8453);const s={date:"2024-05-08 22:59",slug:"\u4f7f\u7528python\u6765\u8c03\u7528tinyPNG API\u538b\u7f29\u56fe\u7247"},p=void 0,o={permalink:"/blog/\u4f7f\u7528python\u6765\u8c03\u7528tinyPNG API\u538b\u7f29\u56fe\u7247",editUrl:"https://github.com/frankelinli/frankelinli.github.io/edit/main/blog/2024/05-08-\u4f7f\u7528python\u6765\u8c03\u7528tinyPNG API\u538b\u7f29\u56fe\u7247.md",source:"@site/blog/2024/05-08-\u4f7f\u7528python\u6765\u8c03\u7528tinyPNG API\u538b\u7f29\u56fe\u7247.md",title:"\u4f7f\u7528python\u6765\u8c03\u7528tinyPNG API\u538b\u7f29\u56fe\u7247",description:"\u7528python\u6765\u8c03\u7528tinyPNG\u7684API\u6765\u538b\u7f29\u56fe\u7247\u3001\u8f6c\u6362\u56fe\u7247\u683c\u5f0f\u3002\u4ee5\u4e0b\u4ee3\u7801\u662f\u628ajpg\u56fe\u7247\u8f6c\u6362\u4e3awebp\u683c\u5f0f\u3002\u8f6c\u6362\u683c\u5f0f\u65f6\uff0c\u4f1a\u81ea\u52a8\u538b\u7f29\u56fe\u7247\u3002",date:"2024-05-08T22:59:00.000Z",tags:[],readingTime:5.99,hasTruncateMarker:!0,authors:[],frontMatter:{date:"2024-05-08 22:59",slug:"\u4f7f\u7528python\u6765\u8c03\u7528tinyPNG API\u538b\u7f29\u56fe\u7247"},unlisted:!1,lastUpdatedAt:1715654303e3,prevItem:{title:"\u6df1\u5733\u5927\u6885\u6c99\u53d1\u751f\u649e\u8f66\u4e8b\u6545",permalink:"/blog/\u6211\u5728\u6df1\u5733\u5927\u6885\u6c99\u53d1\u751f\u649e\u8f66\u4e8b\u6545"},nextItem:{title:"xyz\u80b2\u513f\u8d39\u7528",permalink:"/blog/\u80b2\u513f\u8d39\u7528"}},a={authorsImageUrls:[]},c=[{value:"\u6700\u7b80\u6d01\u4ee3\u7801",id:"\u6700\u7b80\u6d01\u4ee3\u7801",level:3},{value:"\u5e26\u6709\u5c4f\u5e55\u63d0\u793a\u548c\u4efb\u610f\u952e\u5173\u95ed\u4ee3\u7801",id:"\u5e26\u6709\u5c4f\u5e55\u63d0\u793a\u548c\u4efb\u610f\u952e\u5173\u95ed\u4ee3\u7801",level:3},{value:"\u4e3a\u4f55type\u8981\u4f7f\u7528\u6570\u7ec4\uff1f",id:"\u4e3a\u4f55type\u8981\u4f7f\u7528\u6570\u7ec4",level:3},{value:"\u5982\u679c\u6211\u53ea\u60f3\u8981webp\u683c\u5f0f\uff0c\u4e0d\u4f7f\u7528\u6570\u7ec4\u53ef\u4ee5\u5417",id:"\u5982\u679c\u6211\u53ea\u60f3\u8981webp\u683c\u5f0f\u4e0d\u4f7f\u7528\u6570\u7ec4\u53ef\u4ee5\u5417",level:3},{value:"\u518d\u6b21\u5b8c\u5584\u4ee3\u7801\uff1a\u6253\u5f00\u6587\u4ef6\u6846\uff0c\u9009\u62e9\u539f\u56fe",id:"\u518d\u6b21\u5b8c\u5584\u4ee3\u7801\u6253\u5f00\u6587\u4ef6\u6846\u9009\u62e9\u539f\u56fe",level:3},{value:"\u4ee3\u7801\u4f18\u5316: \u6587\u4ef6\u6846\u8fc7\u6ee4\u6587\u4ef6\uff0c\u53ea\u663e\u793a\u56fe\u7247\u6587\u4ef6",id:"\u4ee3\u7801\u4f18\u5316-\u6587\u4ef6\u6846\u8fc7\u6ee4\u6587\u4ef6\u53ea\u663e\u793a\u56fe\u7247\u6587\u4ef6",level:3}];function l(e){const n={code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"\u7528python\u6765\u8c03\u7528tinyPNG\u7684API\u6765\u538b\u7f29\u56fe\u7247\u3001\u8f6c\u6362\u56fe\u7247\u683c\u5f0f\u3002\u4ee5\u4e0b\u4ee3\u7801\u662f\u628ajpg\u56fe\u7247\u8f6c\u6362\u4e3awebp\u683c\u5f0f\u3002\u8f6c\u6362\u683c\u5f0f\u65f6\uff0c\u4f1a\u81ea\u52a8\u538b\u7f29\u56fe\u7247\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u6700\u7b80\u6d01\u4ee3\u7801",children:"\u6700\u7b80\u6d01\u4ee3\u7801"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import tinify\ntinify.key = "JRk8s8gxWYpsd6PY925SSN175Hffrkhg"\n\nsource = tinify.from_file("jingdezhen.JPG")\nconverted = source.convert(type=["image/webp","image/png"])\nextension = converted.result().extension\nconverted.to_file("jingdezhen." + extension)\t\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u5e26\u6709\u5c4f\u5e55\u63d0\u793a\u548c\u4efb\u610f\u952e\u5173\u95ed\u4ee3\u7801",children:"\u5e26\u6709\u5c4f\u5e55\u63d0\u793a\u548c\u4efb\u610f\u952e\u5173\u95ed\u4ee3\u7801"}),"\n",(0,i.jsx)(n.p,{children:"\u4f18\u5316\u7248\u4ee3\u7801\uff0c\u63d0\u4f9b\u4e86\u5c4f\u5e55\u63d0\u793a\uff0c\u548c\u4efb\u610f\u952e\u5173\u95ed\u5c4f\u5e55\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import tinify\nimport os\nimport msvcrt\n\ndef print_file_size(filepath):\n    size = os.path.getsize(filepath) / 1024\n    print("\u6587\u4ef6\u5927\u5c0f: %d kb" % size)\n\ndef optimize_image(source_path):\n    try:\n        print_file_size(source_path)\n        print("\u5f00\u59cb\u8bfb\u53d6\u56fe\u50cf\u5230tinyPNG\u670d\u52a1\u5668...")\n        source = tinify.from_file(source_path)\n        print("\u56fe\u50cf\u52a0\u8f7d\u6210\u529f\uff0c\u6b63\u5728\u8fdb\u884c\u8f6c\u6362...")\n        converted = source.convert(type="image/webp")      # \u8f6c\u6362\u4e3awebp\n        extension = converted.result().extension\n        output_path = os.path.join(os.path.dirname(source_path), "test." + extension)\n        converted.to_file(output_path)\n        print("\u56fe\u50cf\u8f6c\u6362\u6210\u529f\uff0c\u5df2\u4fdd\u5b58\u4e3a%s" % output_path)\n        print_file_size(output_path)\n        print("\u6309\u4e0b\u4efb\u610f\u952e\u5173\u95ed...")\n        msvcrt.getch()  # \u7b49\u5f85\u7528\u6237\u6309\u4e0b\u4efb\u610f\u952e\n    except tinify.AccountError as e:\n        print("\u8d26\u6237\u9519\u8bef\uff1a%s" % e.message)\n    except tinify.ClientError as e:\n        print("\u5ba2\u6237\u7aef\u9519\u8bef\uff1a%s" % e.message)\n    except tinify.ServerError as e:\n        print("\u670d\u52a1\u5668\u9519\u8bef\uff1a%s" % e.message)\n    except tinify.ConnectionError as e:\n        print("\u8fde\u63a5\u9519\u8bef\uff1a%s" % e.message)\n    except Exception as e:\n        print("\u53d1\u751f\u5f02\u5e38\uff1a%s" % str(e))\n\n# \u8bbe\u7f6eAPI\u5bc6\u94a5\ntinify.key = "JRk8s8gxWYpsd6PYd925SSN172Hffrkhg"\n# \u8bbe\u7f6e\u6e90\u56fe\u50cf\u8def\u5f84\nsource_path = "test.JPEG"\n# \u4f18\u5316\u56fe\u50cf\noptimize_image(source_path)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u4e3a\u4f55type\u8981\u4f7f\u7528\u6570\u7ec4",children:"\u4e3a\u4f55type\u8981\u4f7f\u7528\u6570\u7ec4\uff1f"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u4f7f\u7528 Tinify \u8f6c\u6362\u56fe\u50cf\u683c\u5f0f\u65f6\uff0c",(0,i.jsx)(n.code,{children:"type"})," \u53c2\u6570\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\u3002\u8fd9\u662f\u56e0\u4e3a Tinify \u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u4fbf\u7684\u65b9\u5f0f\uff0c\u5141\u8bb8\u4f60\u6307\u5b9a\u591a\u4e2a\u76ee\u6807\u683c\u5f0f\u8fdb\u884c\u8f6c\u6362\u3002\u901a\u8fc7\u5c06\u591a\u4e2a\u683c\u5f0f\u5305\u542b\u5728\u6570\u7ec4\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4e00\u6b21\u6027\u5c06\u6e90\u56fe\u50cf\u8f6c\u6362\u4e3a\u591a\u4e2a\u76ee\u6807\u683c\u5f0f\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u4f60\u7684\u4ee3\u7801\u793a\u4f8b\u4e2d\uff0c\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:'type=["image/webp"]'})," \u5c06\u6e90\u56fe\u50cf\u8f6c\u6362\u4e3a WebP \u683c\u5f0f\u3002\u5982\u679c\u4f60\u60f3\u540c\u65f6\u5c06\u56fe\u50cf\u8f6c\u6362\u4e3a\u591a\u4e2a\u683c\u5f0f\uff0c\u53ea\u9700\u5728 ",(0,i.jsx)(n.code,{children:"type"})," \u6570\u7ec4\u4e2d\u6dfb\u52a0\u66f4\u591a\u5143\u7d20\u5373\u53ef\uff0c\u4f8b\u5982\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'converted = source.convert(type=["image/webp", "image/jpeg", "image/png"])\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u6837\uff0c\u6e90\u56fe\u50cf\u5c06\u8f6c\u6362\u4e3a WebP\u3001JPEG \u548c PNG \u683c\u5f0f\u7684\u4e09\u4e2a\u526f\u672c\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u901a\u8fc7\u4f7f\u7528\u6570\u7ec4\uff0cTinify \u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u6d01\u800c\u7075\u6d3b\u7684\u65b9\u5f0f\uff0c\u65b9\u4fbf\u5730\u6307\u5b9a\u591a\u4e2a\u76ee\u6807\u683c\u5f0f\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u5982\u679c\u6211\u53ea\u60f3\u8981webp\u683c\u5f0f\u4e0d\u4f7f\u7528\u6570\u7ec4\u53ef\u4ee5\u5417",children:"\u5982\u679c\u6211\u53ea\u60f3\u8981webp\u683c\u5f0f\uff0c\u4e0d\u4f7f\u7528\u6570\u7ec4\u53ef\u4ee5\u5417"}),"\n",(0,i.jsxs)(n.p,{children:["\u662f\u7684\uff0c\u5982\u679c\u4f60\u53ea\u60f3\u5c06\u56fe\u50cf\u8f6c\u6362\u4e3a WebP \u683c\u5f0f\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u5c06 ",(0,i.jsx)(n.code,{children:'"image/webp"'})," \u4f5c\u4e3a\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9 ",(0,i.jsx)(n.code,{children:"type"})," \u53c2\u6570\uff0c\u800c\u65e0\u9700\u4f7f\u7528\u6570\u7ec4\u3002\u4ee5\u4e0b\u662f\u793a\u4f8b\u4ee3\u7801\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'converted = source.convert(type="image/webp")\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u6837\uff0c\u6e90\u56fe\u50cf\u5c06\u4ec5\u8f6c\u6362\u4e3a WebP \u683c\u5f0f\uff0c\u800c\u4e0d\u4f1a\u751f\u6210\u5176\u4ed6\u683c\u5f0f\u7684\u526f\u672c\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u6570\u7ec4\u7684\u4e3b\u8981\u4f18\u52bf\u662f\u5728\u5355\u4e2a\u8f6c\u6362\u64cd\u4f5c\u4e2d\u6307\u5b9a\u591a\u4e2a\u76ee\u6807\u683c\u5f0f\u3002\u5982\u679c\u53ea\u9700\u8981\u4e00\u4e2a\u683c\u5f0f\uff0c\u76f4\u63a5\u4f20\u9012\u5b57\u7b26\u4e32\u5373\u53ef\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u518d\u6b21\u5b8c\u5584\u4ee3\u7801\u6253\u5f00\u6587\u4ef6\u6846\u9009\u62e9\u539f\u56fe",children:"\u518d\u6b21\u5b8c\u5584\u4ee3\u7801\uff1a\u6253\u5f00\u6587\u4ef6\u6846\uff0c\u9009\u62e9\u539f\u56fe"}),"\n",(0,i.jsx)(n.p,{children:"\u8865\u5145\u4e86\u4ee3\u7801\uff0c\u5b9e\u73b0\u5728\u7a97\u53e3\u91cc\u9009\u62e9\u539f\u56fe\uff0c\u7136\u540e\u6267\u884c\u4ee3\u7801\uff0c\u8f93\u51fa\u4e3a\u8f6c\u6362\u540e\u7684\u56fe\u7247\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'\nimport tinify\nimport os\nimport tkinter as tk\nfrom tkinter import filedialog\nimport msvcrt\n\ndef print_file_size(filepath):\n    size = os.path.getsize(filepath) / 1024\n    print("\u6587\u4ef6\u5927\u5c0f: %d kb" % size)\n\ndef optimize_image(source_path):\n    try:\n        print_file_size(source_path)\n        print("\u5f00\u59cb\u8bfb\u53d6\u56fe\u50cf\u5230tinyPNG\u670d\u52a1\u5668...")\n        source = tinify.from_file(source_path)\n        print("\u56fe\u50cf\u52a0\u8f7d\u6210\u529f\uff0c\u6b63\u5728\u8fdb\u884c\u8f6c\u6362...")\n        converted = source.convert(type="image/webp")      # \u8f6c\u6362\u4e3awebp\n        extension = converted.result().extension\n        output_path = os.path.join(os.path.dirname(source_path), "test." + extension)\n        converted.to_file(output_path)\n        print("\u56fe\u50cf\u8f6c\u6362\u6210\u529f\uff0c\u5df2\u4fdd\u5b58\u4e3a%s" % output_path)\n        print_file_size(output_path)\n        print("\u6309\u4e0b\u4efb\u610f\u952e\u5173\u95ed...")\n        msvcrt.getch()  # \u7b49\u5f85\u7528\u6237\u6309\u4e0b\u4efb\u610f\u952e\n    except tinify.AccountError as e:\n        print("\u8d26\u6237\u9519\u8bef\uff1a%s" % e.message)\n    except tinify.ClientError as e:\n        print("\u5ba2\u6237\u7aef\u9519\u8bef\uff1a%s" % e.message)\n    except tinify.ServerError as e:\n        print("\u670d\u52a1\u5668\u9519\u8bef\uff1a%s" % e.message)\n    except tinify.ConnectionError as e:\n        print("\u8fde\u63a5\u9519\u8bef\uff1a%s" % e.message)\n    except Exception as e:\n        print("\u53d1\u751f\u5f02\u5e38\uff1a%s" % str(e))\n\ndef open_file_dialog():\n    root = tk.Tk()\n    root.withdraw()\n    file_path = filedialog.askopenfilename()\n    if file_path:\n        optimize_image(file_path)\n\n# \u8bbe\u7f6eAPI\u5bc6\u94a5\ntinify.key = "JRk8s8gxWYpsd6PY925SSN172Hffrkhg"\n\n# \u6253\u5f00\u6587\u4ef6\u5bf9\u8bdd\u6846\u9009\u62e9\u56fe\u50cf\u6587\u4ef6\u5e76\u4f18\u5316\nopen_file_dialog()\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u4ee3\u7801\u4f18\u5316-\u6587\u4ef6\u6846\u8fc7\u6ee4\u6587\u4ef6\u53ea\u663e\u793a\u56fe\u7247\u6587\u4ef6",children:"\u4ee3\u7801\u4f18\u5316: \u6587\u4ef6\u6846\u8fc7\u6ee4\u6587\u4ef6\uff0c\u53ea\u663e\u793a\u56fe\u7247\u6587\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import tinify\nimport os\nimport tkinter as tk\nfrom tkinter import filedialog\nimport msvcrt\n\ndef print_file_size(filepath):\n    size = os.path.getsize(filepath) / 1024\n    print("\u6587\u4ef6\u5927\u5c0f: %d kb" % size)\n\ndef optimize_image(source_path):\n    try:\n        print_file_size(source_path)\n        print("\u5f00\u59cb\u8bfb\u53d6\u56fe\u50cf\u5230tinyPNG\u670d\u52a1\u5668...")\n        source = tinify.from_file(source_path)\n        print("\u56fe\u50cf\u52a0\u8f7d\u6210\u529f\uff0c\u6b63\u5728\u8fdb\u884c\u8f6c\u6362...")\n        converted = source.convert(type="image/webp")      # \u8f6c\u6362\u4e3awebp\n        extension = converted.result().extension\n        output_path = os.path.join(os.path.dirname(source_path), "test." + extension)\n        converted.to_file(output_path)\n        print("\u56fe\u50cf\u8f6c\u6362\u6210\u529f\uff0c\u5df2\u4fdd\u5b58\u4e3a%s" % output_path)\n        print_file_size(output_path)\n        print("\u6309\u4e0b\u4efb\u610f\u952e\u5173\u95ed...")\n        msvcrt.getch()  # \u7b49\u5f85\u7528\u6237\u6309\u4e0b\u4efb\u610f\u952e\n    except tinify.AccountError as e:\n        print("\u8d26\u6237\u9519\u8bef\uff1a%s" % e.message)\n    except tinify.ClientError as e:\n        print("\u5ba2\u6237\u7aef\u9519\u8bef\uff1a%s" % e.message)\n    except tinify.ServerError as e:\n        print("\u670d\u52a1\u5668\u9519\u8bef\uff1a%s" % e.message)\n    except tinify.ConnectionError as e:\n        print("\u8fde\u63a5\u9519\u8bef\uff1a%s" % e.message)\n    except Exception as e:\n        print("\u53d1\u751f\u5f02\u5e38\uff1a%s" % str(e))\n\ndef is_image_file(file_path):\n    image_extensions = [\'.png\', \'.jpg\', \'.jpeg\', \'.gif\', \'.bmp\', \'.jfif\']\n    _, file_extension = os.path.splitext(file_path)\n    return file_extension.lower() in image_extensions\n\ndef open_file_dialog():\n    root = tk.Tk()\n    root.withdraw()\n    file_path = filedialog.askopenfilename(filetypes=[("Image Files", "*.png;*.jpg;*.jpeg;*.gif;*.bmp;*.jfif")])\n    if file_path and is_image_file(file_path):\n        optimize_image(file_path)\n\n# \u8bbe\u7f6eAPI\u5bc6\u94a5\ntinify.key = "JRk8s8gxWYpsd6PY925SSN172Hffrkhg"\n\n# \u6253\u5f00\u6587\u4ef6\u5bf9\u8bdd\u6846\u9009\u62e9\u56fe\u50cf\u6587\u4ef6\u5e76\u4f18\u5316\nopen_file_dialog()\n'})}),"\n",(0,i.jsx)(n.p,{children:"::: info"}),"\n",(0,i.jsx)(n.p,{children:"python\u7684tkinter\u5e93\uff0c\u867d\u7136\u8fc7\u6ee4\u4e86\u53ea\u663e\u793a\u56fe\u7247\u6587\u4ef6\uff0c\u4f46\u662f\u4ecd\u7136\u4f1a\u663e\u793a\u6587\u4ef6\u5939\u3002\u8fd9\u662ftikinter\u5c40\u9650"}),"\n",(0,i.jsx)(n.p,{children:":::"})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>p,x:()=>o});var i=t(6540);const r={},s=i.createContext(r);function p(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:p(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);