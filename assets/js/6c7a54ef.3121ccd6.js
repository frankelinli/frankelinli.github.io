"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9304],{92687:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>i,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var a=t(63460),o=t(74848),l=t(28453);const r={date:"2024-10-24 00:12",slug:"changelog\u5355\u9875\u663e\u793a\u5168\u90e8\u6587\u7ae0"},s=void 0,i={authorsImageUrls:[]},c=[];function h(n){const e={a:"a",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",...(0,l.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.p,{children:"changelog\u5355\u9875\u663e\u793a\u5168\u90e8\u6587\u7ae0"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:"https://wpastra.com/whats-new/#astra-pro-4-8-2-updates-2",children:"https://wpastra.com/whats-new/#astra-pro-4-8-2-updates-2"})}),"\n",(0,o.jsx)(e.p,{children:"\u4eceURL\u6765\u770b,\u5b83\u786e\u5b9e\u662f\u5728\u4e00\u4e2a\u9875\u9762\u4e0a\u663e\u793a\u6240\u6709\u7684\u66f4\u65b0\u8bb0\u5f55,\u800c\u4e0d\u662f\u4f7f\u7528WordPress\u9ed8\u8ba4\u7684single\u548carchive\u7ed3\u6784\u3002\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5b9e\u73b0:"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u9875\u9762\u6a21\u677f:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-php",children:"<?php\n/*\nTemplate Name: Changelog Page\n*/\n\nget_header();\n?>\n\n<div class=\"changelog-wrapper\">\n    <?php\n    $changelogs = new WP_Query(array(\n        'post_type' => 'changelog',\n        'posts_per_page' => -1, // \u663e\u793a\u6240\u6709\u6587\u7ae0\n        'orderby' => 'date',\n        'order' => 'DESC'\n    ));\n\n    if ($changelogs->have_posts()) :\n        while ($changelogs->have_posts()) : $changelogs->the_post();\n    ?>\n        <article class=\"changelog-entry\">\n            <div class=\"changelog-header\">\n                <div class=\"author-meta\">\n                    <?php echo get_avatar(get_the_author_meta('email'), 40); ?>\n                    <div class=\"author-info\">\n                        <span class=\"author-name\"><?php echo get_the_author(); ?></span>\n                        <time datetime=\"<?php echo get_the_date('c'); ?>\">\n                            <?php echo get_the_date(); ?>\n                        </time>\n                    </div>\n                </div>\n                <h2><?php the_title(); ?></h2>\n            </div>\n            \n            <div class=\"changelog-content\">\n                <?php the_content(); ?>\n            </div>\n        </article>\n    <?php\n        endwhile;\n        wp_reset_postdata();\n    endif;\n    ?>\n</div>\n\n<?php get_footer(); ?>\n"})}),"\n",(0,o.jsxs)(e.ol,{start:"2",children:["\n",(0,o.jsx)(e.li,{children:"\u6dfb\u52a0\u6837\u5f0f:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-css",children:'.changelog-wrapper {\n    max-width: 800px;\n    margin: 0 auto;\n    padding: 20px;\n}\n\n.changelog-entry {\n    background: #fff;\n    border-radius: 8px;\n    padding: 30px;\n    margin-bottom: 30px;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.05);\n}\n\n.changelog-header {\n    margin-bottom: 20px;\n}\n\n.author-meta {\n    display: flex;\n    align-items: center;\n    margin-bottom: 15px;\n}\n\n.author-meta img {\n    border-radius: 50%;\n    margin-right: 12px;\n}\n\n.author-info {\n    display: flex;\n    flex-direction: column;\n}\n\n.author-name {\n    font-weight: 500;\n    color: #333;\n}\n\ntime {\n    color: #666;\n    font-size: 0.9em;\n}\n\n.changelog-content h3 {\n    margin-top: 20px;\n    margin-bottom: 10px;\n    font-size: 1.2em;\n    color: #333;\n}\n\n.changelog-content ul {\n    list-style: none;\n    padding-left: 0;\n}\n\n.changelog-content li {\n    margin-bottom: 8px;\n    padding-left: 20px;\n    position: relative;\n}\n\n.changelog-content li:before {\n    content: "\u2022";\n    position: absolute;\n    left: 0;\n    color: #0073aa;\n}\n'})}),"\n",(0,o.jsxs)(e.ol,{start:"3",children:["\n",(0,o.jsx)(e.li,{children:"\u5728functions.php\u4e2d\u6dfb\u52a0\u652f\u6301:"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-php",children:"function register_changelog_post_type() {\n    register_post_type('changelog',\n        array(\n            'labels' => array(\n                'name' => __('Changelog'),\n                'singular_name' => __('Changelog Entry'),\n                'add_new' => __('Add New Entry'),\n                'add_new_item' => __('Add New Changelog Entry'),\n                'edit_item' => __('Edit Changelog Entry'),\n            ),\n            'public' => true,\n            'publicly_queryable' => false, // \u7981\u7528\u5355\u4e2a\u6587\u7ae0\u9875\u9762\u8bbf\u95ee\n            'show_ui' => true,\n            'show_in_menu' => true,\n            'supports' => array('title', 'editor', 'author'),\n            'menu_icon' => 'dashicons-backup',\n        )\n    );\n}\nadd_action('init', 'register_changelog_post_type');\n\n// \u53ef\u9009\uff1a\u6dfb\u52a0\u81ea\u5b9a\u4e49\u533a\u5757\u6837\u5f0f\nfunction changelog_block_styles() {\n    wp_enqueue_style(\n        'changelog-styles',\n        get_template_directory_uri() . '/assets/css/changelog.css',\n        array(),\n        '1.0.0'\n    );\n}\nadd_action('wp_enqueue_scripts', 'changelog_block_styles');\n"})}),"\n",(0,o.jsxs)(e.ol,{start:"4",children:["\n",(0,o.jsx)(e.li,{children:"\u4e3a\u7f16\u8f91\u5668\u6dfb\u52a0\u81ea\u5b9a\u4e49\u683c\u5f0f(\u53ef\u9009):"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-php",children:"function changelog_editor_styles() {\n    add_editor_style('assets/css/changelog-editor.css');\n}\nadd_action('admin_init', 'changelog_editor_styles');\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u4f7f\u7528\u65b9\u6cd5:"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:'\u521b\u5efa\u4e00\u4e2a\u65b0\u9875\u9762\uff0c\u9009\u62e9"Changelog Page"\u6a21\u677f'}),"\n",(0,o.jsx)(e.li,{children:"\u5728\u540e\u53f0\u6dfb\u52a0changelog\u6587\u7ae0"}),"\n",(0,o.jsx)(e.li,{children:"\u4f7f\u7528Gutenberg\u7f16\u8f91\u5668\u7684\u5217\u8868\u533a\u5757\u6765\u6dfb\u52a0\u66f4\u65b0\u5185\u5bb9"}),"\n",(0,o.jsx)(e.li,{children:'\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7c7b\u522b\u6765\u533a\u5206"New"\u3001"Fixes"\u7b49\u4e0d\u540c\u7c7b\u578b\u7684\u66f4\u65b0'}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"\u4f60\u4e5f\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e9bJavaScript\u6765\u589e\u5f3a\u7528\u6237\u4f53\u9a8c:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:"document.addEventListener('DOMContentLoaded', function() {\n    // \u5e73\u6ed1\u6eda\u52a8\u5230\u6307\u5b9a\u7248\u672c\n    const urlParams = new URLSearchParams(window.location.search);\n    const version = urlParams.get('version');\n    \n    if (version) {\n        const element = document.querySelector(`[data-version=\"${version}\"]`);\n        if (element) {\n            element.scrollIntoView({ behavior: 'smooth' });\n        }\n    }\n    \n    // \u53ef\u4ee5\u6dfb\u52a0\u8fc7\u6ee4\u529f\u80fd\n    const filterButtons = document.querySelectorAll('.changelog-filter button');\n    filterButtons.forEach(button => {\n        button.addEventListener('click', function() {\n            const type = this.dataset.type;\n            const entries = document.querySelectorAll('.changelog-entry');\n            \n            entries.forEach(entry => {\n                if (type === 'all' || entry.dataset.type === type) {\n                    entry.style.display = '';\n                } else {\n                    entry.style.display = 'none';\n                }\n            });\n        });\n    });\n});\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5173\u952e\u70b9:"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["\u8bbe\u7f6e",(0,o.jsx)(e.code,{children:"publicly_queryable => false"}),"\u7981\u7528\u5355\u4e2a\u6587\u7ae0\u9875\u9762\u8bbf\u95ee"]}),"\n",(0,o.jsx)(e.li,{children:"\u4f7f\u7528WP_Query\u83b7\u53d6\u6240\u6709changelog\u6587\u7ae0\u5e76\u5728\u4e00\u4e2a\u9875\u9762\u663e\u793a"}),"\n",(0,o.jsx)(e.li,{children:"\u4f7f\u7528CSS Grid\u6216Flexbox\u6765\u5e03\u5c40"}),"\n",(0,o.jsx)(e.li,{children:"\u53ef\u4ee5\u6dfb\u52a0\u8fc7\u6ee4\u548c\u641c\u7d22\u529f\u80fd"}),"\n",(0,o.jsx)(e.li,{children:"\u53ef\u4ee5\u4f7f\u7528WordPress\u7684\u533a\u5757\u7f16\u8f91\u5668\u6765\u65b9\u4fbf\u5730\u7f16\u8f91\u5185\u5bb9"}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"\u8fd9\u6837\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u7c7b\u4f3c\u56fe\u7247\u4e2d\u7684changelog\u9875\u9762\u4e86\u3002\u9700\u8981\u66f4\u591a\u5177\u4f53\u7684\u5b9e\u73b0\u7ec6\u8282\u5417\uff1f"})]})}function d(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(h,{...n})}):h(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>s});var a=t(96540);const o={},l=a.createContext(o);function r(n){const e=a.useContext(l);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),a.createElement(l.Provider,{value:e},n.children)}},63460:n=>{n.exports=JSON.parse('{"permalink":"/blog/changelog\u5355\u9875\u663e\u793a\u5168\u90e8\u6587\u7ae0","editUrl":"https://github.com/frankelinli/frankelinli.github.io/edit/main/blog/2024/10-24-changelog\u5355\u9875\u663e\u793a\u5168\u90e8\u6587\u7ae0.md","source":"@site/blog/2024/10-24-changelog\u5355\u9875\u663e\u793a\u5168\u90e8\u6587\u7ae0.md","title":"changelog\u5355\u9875\u663e\u793a\u5168\u90e8\u6587\u7ae0","description":"changelog\u5355\u9875\u663e\u793a\u5168\u90e8\u6587\u7ae0","date":"2024-10-24T00:12:00.000Z","tags":[],"readingTime":2.84,"hasTruncateMarker":true,"authors":[],"frontMatter":{"date":"2024-10-24 00:12","slug":"changelog\u5355\u9875\u663e\u793a\u5168\u90e8\u6587\u7ae0"},"unlisted":false,"lastUpdatedAt":1732255826000,"prevItem":{"title":"publicly_queryable\u8bbe\u7f6e","permalink":"/blog/publicly_queryable\u8bbe\u7f6e"},"nextItem":{"title":"category-apple.php\u4f18\u5148\u7ea7\u7ee7\u627f\u6a21\u677f","permalink":"/blog/category-apple.php\u4f18\u5148\u7ea7\u7ee7\u627f\u6a21\u677f"}}')}}]);