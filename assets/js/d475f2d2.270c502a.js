"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9921],{34875:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>o,metadata:()=>s,toc:()=>_});var s=i(86275),t=i(74848),d=i(28453);const o={date:"2024-12-21 09:47",slug:"\u5982\u4f55\u7ed9wordpress\u6587\u7ae0\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5b57\u6bb5 is doc=true"},c=void 0,l={authorsImageUrls:[]},_=[{value:"\u4f7f\u7528WordPress\u539f\u751f\u81ea\u5b9a\u4e49\u5b57\u6bb5\uff08\u6700\u7b80\u5355\uff09\uff1a",id:"\u4f7f\u7528wordpress\u539f\u751f\u81ea\u5b9a\u4e49\u5b57\u6bb5\u6700\u7b80\u5355",level:3},{value:"\u4f7f\u7528Quick Edit\uff08\u5feb\u901f\u7f16\u8f91\uff09\u65b9\u5f0f\uff1a",id:"\u4f7f\u7528quick-edit\u5feb\u901f\u7f16\u8f91\u65b9\u5f0f",level:3},{value:"\u6211\u7684\u6587\u6863\u7c7b\u578b\u8bbe\u7f6e&quot;\u9762\u677f\u4e3a\u4f55\u5728\u7f16\u8f91\u9875\u9762\u5e95\u90e8\uff1f\u6211\u60f3\u653e\u5230\u53f3\u4fa7",id:"\u6211\u7684\u6587\u6863\u7c7b\u578b\u8bbe\u7f6e\u9762\u677f\u4e3a\u4f55\u5728\u7f16\u8f91\u9875\u9762\u5e95\u90e8\u6211\u60f3\u653e\u5230\u53f3\u4fa7",level:3}];function r(n){const e={code:"code",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:"\u6709\u51e0\u79cd\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5b57\u6bb5 is_doc \u7684\u65b9\u6cd5\uff1a"}),"\n",(0,t.jsx)(e.h3,{id:"\u4f7f\u7528wordpress\u539f\u751f\u81ea\u5b9a\u4e49\u5b57\u6bb5\u6700\u7b80\u5355",children:"\u4f7f\u7528WordPress\u539f\u751f\u81ea\u5b9a\u4e49\u5b57\u6bb5\uff08\u6700\u7b80\u5355\uff09\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-php",children:"// \u6dfb\u52a0\u5230functions.php\uff0c\u663e\u793a\u81ea\u5b9a\u4e49\u5b57\u6bb5\u6846\nfunction show_is_doc_meta_box() {\n    // \u786e\u4fdd\u81ea\u5b9a\u4e49\u5b57\u6bb5\u6a21\u5757\u53ef\u89c1\n    add_post_type_support('post', 'custom-fields');\n    \n    add_meta_box(\n        'is_doc_meta_box',           // ID\n        '\u6587\u6863\u7c7b\u578b\u8bbe\u7f6e',              // \u6807\u9898\n        'is_doc_meta_box_callback',  // \u56de\u8c03\u51fd\u6570\n        'post'                       // \u663e\u793a\u4f4d\u7f6e\n    );\n}\nadd_action('add_meta_boxes', 'show_is_doc_meta_box');\n\n// meta box\u7684\u5185\u5bb9\nfunction is_doc_meta_box_callback($post) {\n    wp_nonce_field('is_doc_save', 'is_doc_nonce');\n    $value = get_post_meta($post->ID, 'is_doc', true);\n    ?>\n    <label>\n        <input type=\"checkbox\" name=\"is_doc\" value=\"true\" <?php checked($value, 'true'); ?> />\n        \u8fd9\u662f\u4e00\u7bc7\u6587\u6863\u7c7b\u6587\u7ae0\n    </label>\n    <?php\n}\n\n// \u4fdd\u5b58meta\u503c\nfunction save_is_doc_meta($post_id) {\n    if (!isset($_POST['is_doc_nonce']) || \n        !wp_verify_nonce($_POST['is_doc_nonce'], 'is_doc_save')) {\n        return;\n    }\n    \n    if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) {\n        return;\n    }\n    \n    if (!current_user_can('edit_post', $post_id)) {\n        return;\n    }\n    \n    if (isset($_POST['is_doc'])) {\n        update_post_meta($post_id, 'is_doc', 'true');\n    } else {\n        delete_post_meta($post_id, 'is_doc');\n    }\n}\nadd_action('save_post', 'save_is_doc_meta');\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u6548\u679c\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:'\u5728\u6587\u7ae0\u7f16\u8f91\u9875\u9762\u53f3\u4fa7\u4f1a\u51fa\u73b0"\u6587\u6863\u7c7b\u578b\u8bbe\u7f6e"\u9762\u677f'}),"\n",(0,t.jsx)(e.li,{children:"\u5305\u542b\u4e00\u4e2a\u7b80\u5355\u7684\u590d\u9009\u6846"}),"\n",(0,t.jsx)(e.li,{children:"\u52fe\u9009\u540e\u8be5\u6587\u7ae0\u5c31\u4f1a\u88ab\u6807\u8bb0\u4e3a\u6587\u6863\u7c7b"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"\u4f7f\u7528quick-edit\u5feb\u901f\u7f16\u8f91\u65b9\u5f0f",children:"\u4f7f\u7528Quick Edit\uff08\u5feb\u901f\u7f16\u8f91\uff09\u65b9\u5f0f\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-php",children:"// \u5728\u6587\u7ae0\u5217\u8868\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5217\uff08\u5df2\u6709\uff09\nfunction add_is_doc_column($columns) {\n    $new_columns = array();\n    foreach ($columns as $key => $value) {\n        $new_columns[$key] = $value;\n        if ($key === 'title') {\n            $new_columns['is_doc'] = __('\u6587\u6863\u7c7b\u578b', 'csrwiki');\n        }\n    }\n    return $new_columns;\n}\nadd_filter('manage_posts_columns', 'add_is_doc_column');\n\n// \u663e\u793a\u81ea\u5b9a\u4e49\u5217\u7684\u5185\u5bb9\uff08\u5df2\u6709\uff09\nfunction show_is_doc_column_content($column, $post_id) {\n    if ($column === 'is_doc') {\n        $is_doc = get_post_meta($post_id, 'is_doc', true);\n        if ($is_doc) {\n            echo '<span style=\"color: #2271b1;\">\ud83d\udcda \u6587\u6863</span>';\n        } else {\n            echo '<span style=\"color: #666;\">\ud83d\udcf0 \u666e\u901a</span>';\n        }\n    }\n}\nadd_action('manage_posts_custom_column', 'show_is_doc_column_content', 10, 2);\n\n// \u6dfb\u52a0\u5feb\u901f\u7f16\u8f91\u5b57\u6bb5\nfunction add_quick_edit_is_doc($column_name, $post_type) {\n    if ($column_name !== 'is_doc') return;\n    ?>\n    <fieldset class=\"inline-edit-col-right\">\n        <div class=\"inline-edit-col\">\n            <label class=\"alignleft\">\n                <input type=\"checkbox\" name=\"is_doc\" value=\"true\">\n                <span class=\"checkbox-title\"><?php _e('\u6807\u8bb0\u4e3a\u6587\u6863\u7c7b\u6587\u7ae0', 'csrwiki'); ?></span>\n            </label>\n        </div>\n    </fieldset>\n    <?php\n}\nadd_action('quick_edit_custom_box', 'add_quick_edit_is_doc', 10, 2);\n\n// \u4fdd\u5b58\u5feb\u901f\u7f16\u8f91\u7684\u503c\nfunction save_quick_edit_is_doc($post_id) {\n    // \u5b89\u5168\u68c0\u67e5\n    if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) return;\n    if (!current_user_can('edit_post', $post_id)) return;\n    \n    // \u4fdd\u5b58is_doc\u503c\n    if (isset($_POST['is_doc'])) {\n        update_post_meta($post_id, 'is_doc', 'true');\n    } else {\n        delete_post_meta($post_id, 'is_doc');\n    }\n}\nadd_action('save_post', 'save_quick_edit_is_doc');\n\n// \u6dfb\u52a0\u5fc5\u8981\u7684JavaScript\u6765\u5904\u7406\u5feb\u901f\u7f16\u8f91\nfunction add_quick_edit_js() {\n    ?>\n    <script type=\"text/javascript\">\n    jQuery(document).ready(function($) {\n        // \u4fdd\u5b58\u539f\u59cb\u7684inlineEditPost.edit\u51fd\u6570\n        var $wp_inline_edit = inlineEditPost.edit;\n        \n        // \u91cd\u5199inlineEditPost.edit\u51fd\u6570\n        inlineEditPost.edit = function(id) {\n            // \u8c03\u7528\u539f\u59cb\u7684edit\u51fd\u6570\n            $wp_inline_edit.apply(this, arguments);\n            \n            // \u83b7\u53d6post ID\n            var post_id = 0;\n            if (typeof(id) == 'object') {\n                post_id = parseInt(this.getId(id));\n            }\n            \n            // \u83b7\u53d6\u884c\u6570\u636e\u5e76\u8bbe\u7f6e\u590d\u9009\u6846\n            if (post_id > 0) {\n                var edit_row = $('#edit-' + post_id);\n                var post_row = $('#post-' + post_id);\n                \n                // \u68c0\u67e5\u662f\u5426\u662f\u6587\u6863\n                var is_doc = post_row.find('.is_doc span').text().indexOf('\u6587\u6863') !== -1;\n                \n                // \u8bbe\u7f6e\u590d\u9009\u6846\u72b6\u6001\n                edit_row.find('input[name=\"is_doc\"]').prop('checked', is_doc);\n            }\n        };\n    });\n    <\/script>\n    <?php\n}\nadd_action('admin_footer-edit.php', 'add_quick_edit_js');\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u5c06\uff1a"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"\u5728\u5feb\u901f\u7f16\u8f91\u9762\u677f\u4e2d\u6dfb\u52a0\u590d\u9009\u6846"}),"\n",(0,t.jsx)(e.li,{children:"\u6b63\u786e\u4fdd\u5b58\u5feb\u901f\u7f16\u8f91\u7684\u503c"}),"\n",(0,t.jsx)(e.li,{children:"\u6b63\u786e\u52a0\u8f7d\u73b0\u6709\u7684is_doc\u72b6\u6001"}),"\n",(0,t.jsx)(e.li,{children:"\u5904\u7406JavaScript\u4ea4\u4e92"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u73b0\u5728\u5f53\u4f60\u70b9\u51fb\u5feb\u901f\u7f16\u8f91\u65f6\uff0c\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:'"\u6807\u8bb0\u4e3a\u6587\u6863\u7c7b\u6587\u7ae0"\u7684\u590d\u9009\u6846\u9009\u9879'}),"\n",(0,t.jsx)(e.li,{children:"\u5982\u679c\u539f\u672c\u662f\u6587\u6863\u7c7b\uff0c\u590d\u9009\u6846\u4f1a\u81ea\u52a8\u52fe\u9009"}),"\n",(0,t.jsx)(e.li,{children:"\u4fee\u6539\u540e\u53ef\u4ee5\u6b63\u786e\u4fdd\u5b58"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"https://docu-1319658309.cos.ap-guangzhou.myqcloud.com/image-20241221095140527.png",alt:"image-20241221095140527"})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u6837\u5c31\u63d0\u4f9b\u4e86\u4e24\u79cd\u8bbe\u7f6e\u65b9\u5f0f\uff1a"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"\u5728\u7f16\u8f91\u6587\u7ae0\u65f6\u901a\u8fc7\u53f3\u4fa7\u9762\u677f\u8bbe\u7f6e"}),"\n",(0,t.jsx)(e.li,{children:"\u5728\u6587\u7ae0\u5217\u8868\u9875\u901a\u8fc7\u5feb\u901f\u7f16\u8f91\u8bbe\u7f6e"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u4f7f\u7528\u5efa\u8bae\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u65b0\u5efa\u6587\u7ae0\u65f6\u4f7f\u7528\u53f3\u4fa7\u9762\u677f\u8bbe\u7f6e"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u5355\u72ec/\u6279\u91cf\u4fee\u6539\u65f6\u4f7f\u7528\u5feb\u901f\u7f16\u8f91\u529f\u80fd"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u4e24\u79cd\u65b9\u5f0f\u90fd\u5f88\u65b9\u4fbf\uff0c\u9009\u62e9\u4f60\u4e60\u60ef\u7684\u5373\u53ef"}),"\n"]}),"\n",(0,t.jsx)(e.li,{}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"\u6211\u7684\u6587\u6863\u7c7b\u578b\u8bbe\u7f6e\u9762\u677f\u4e3a\u4f55\u5728\u7f16\u8f91\u9875\u9762\u5e95\u90e8\u6211\u60f3\u653e\u5230\u53f3\u4fa7",children:'\u6211\u7684\u6587\u6863\u7c7b\u578b\u8bbe\u7f6e"\u9762\u677f\u4e3a\u4f55\u5728\u7f16\u8f91\u9875\u9762\u5e95\u90e8\uff1f\u6211\u60f3\u653e\u5230\u53f3\u4fa7'}),"\n",(0,t.jsxs)(e.p,{children:["\u8981\u5c06\u6587\u6863\u7c7b\u578b\u8bbe\u7f6e\u9762\u677f\u79fb\u5230\u53f3\u4fa7\uff0c\u9700\u8981\u5728 ",(0,t.jsx)(e.code,{children:"add_meta_box"})," \u51fd\u6570\u4e2d\u8bbe\u7f6e\u6b63\u786e\u7684 ",(0,t.jsx)(e.code,{children:"context"})," \u53c2\u6570\u3002\u4fee\u6539\u4ee3\u7801\u5982\u4e0b\uff1a"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-php",children:"function show_is_doc_meta_box() {\n    add_post_type_support('post', 'custom-fields');\n    \n    add_meta_box(\n        'is_doc_meta_box',           // ID\n        '\u6587\u6863\u7c7b\u578b\u8bbe\u7f6e',              // \u6807\u9898\n        'is_doc_meta_box_callback',  // \u56de\u8c03\u51fd\u6570\n        'post',                      // \u663e\u793a\u4f4d\u7f6e\n        'side',                      // \u8bbe\u7f6e\u4e3aside\u8868\u793a\u663e\u793a\u5728\u53f3\u4fa7\n        'high'                       // \u4f18\u5148\u7ea7\u8bbe\u4e3ahigh\uff0c\u8ba9\u5b83\u663e\u793a\u5728\u8f83\u4e0a\u65b9\n    );\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u5173\u952e\u53d8\u5316\uff1a"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\u6dfb\u52a0\u4e86\u7b2c5\u4e2a\u53c2\u6570 ",(0,t.jsx)(e.code,{children:"'side'"})," - \u6307\u5b9a\u663e\u793a\u4f4d\u7f6e\u5728\u53f3\u4fa7\u680f"]}),"\n",(0,t.jsxs)(e.li,{children:["\u6dfb\u52a0\u4e86\u7b2c6\u4e2a\u53c2\u6570 ",(0,t.jsx)(e.code,{children:"'high'"})," - \u8bbe\u7f6e\u8f83\u9ad8\u4f18\u5148\u7ea7"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:'\u8fd9\u6837\u4fee\u6539\u540e\uff0c"\u6587\u6863\u7c7b\u578b\u8bbe\u7f6e"\u9762\u677f\u5c31\u4f1a\uff1a'}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u663e\u793a\u5728\u53f3\u4fa7\u680f\u4e2d"}),"\n",(0,t.jsx)(e.li,{children:"\u4f4d\u7f6e\u76f8\u5bf9\u9760\u4e0a"}),"\n",(0,t.jsx)(e.li,{children:"\u4e0e\u5176\u4ed6\u53f3\u4fa7\u8bbe\u7f6e\u9762\u677f\u4fdd\u6301\u4e00\u81f4\u7684\u98ce\u683c"}),"\n"]})]})}function a(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(r,{...n})}):r(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>o,x:()=>c});var s=i(96540);const t={},d=s.createContext(t);function o(n){const e=s.useContext(d);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),s.createElement(d.Provider,{value:e},n.children)}},86275:n=>{n.exports=JSON.parse('{"permalink":"/blog/\u5982\u4f55\u7ed9wordpress\u6587\u7ae0\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5b57\u6bb5 is doc=true","editUrl":"https://github.com/frankelinli/frankelinli.github.io/edit/main/blog/2024/12-21-\u5982\u4f55\u7ed9wordpress\u6587\u7ae0\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5b57\u6bb5 is doc=true.md","source":"@site/blog/2024/12-21-\u5982\u4f55\u7ed9wordpress\u6587\u7ae0\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5b57\u6bb5 is doc=true.md","title":"\u5982\u4f55\u7ed9wordpress\u6587\u7ae0\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5b57\u6bb5 is doc=true","description":"\u6709\u51e0\u79cd\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5b57\u6bb5 is_doc \u7684\u65b9\u6cd5\uff1a","date":"2024-12-21T09:47:00.000Z","tags":[],"readingTime":3.66,"hasTruncateMarker":true,"authors":[],"frontMatter":{"date":"2024-12-21 09:47","slug":"\u5982\u4f55\u7ed9wordpress\u6587\u7ae0\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5b57\u6bb5 is doc=true"},"unlisted":false,"lastUpdatedAt":1734789818000,"prevItem":{"title":"\u6587\u7ae0\u7f16\u8f91\u540e\u53f0\u4e3a\u67d0\u4e2a\u5757\u8bbe\u7f6e\u4ec5\u7ba1\u7406\u5458\u53ef\u89c1","permalink":"/blog/\u6587\u7ae0\u7f16\u8f91\u540e\u53f0\u4e3a\u67d0\u4e2a\u5757\u8bbe\u7f6e\u4ec5\u7ba1\u7406\u5458\u53ef\u89c1"},"nextItem":{"title":"\u524d\u7aef\u9875\u9762\u663e\u793ais doc\u81ea\u5b9a\u4e49\u5b57\u6bb5\u662f\u5426\u4e3atrue","permalink":"/blog/\u524d\u7aef\u9875\u9762\u663e\u793ais doc\u81ea\u5b9a\u4e49\u5b57\u6bb5\u662f\u5426\u4e3atrue"}}')}}]);